var n=require("react");function e(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var t,u=/*#__PURE__*/e(n),o="undefined"!=typeof window&&null!=(t=window)&&null!=(t=t.Telegram)&&t.WebApp?window.Telegram.WebApp:null,r=n.createContext(o),l={smoothButtonsTransition:!1,smoothButtonsTransitionMs:50},i=n.createContext(l),c=function(){return{MainButton:{current:null},BackButton:{current:null}}},a=n.createContext({MainButton:{current:null},BackButton:{current:null}}),s=function(){},f=function(e){var t=e.id,u=e.show,o=void 0===u?s:u,r=e.hide,l=void 0===r?s:r,c=e.currentShowedIdRef,a=n.useContext(i),f=a.smoothButtonsTransition,d=a.smoothButtonsTransitionMs;n.useEffect(function(){return o(),c.current=t,function(){f?(c.current=null,setTimeout(function(){c.current||l()},d)):(l(),c.current=null)}},[l,t,c,o,f,d])},d=function(){return n.useContext(r)};function p(){return p=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u])}return n},p.apply(this,arguments)}exports.BackButton=function(e){var t=e.onClick,u=n.useContext(a),o=n.useId(),r=d(),l=null==r?void 0:r.BackButton;return f({show:null==l?void 0:l.show,hide:null==l?void 0:l.hide,currentShowedIdRef:u.BackButton,id:o}),n.useEffect(function(){if(t&&l)return l.onClick(t),function(){l.offClick(t)}},[t,l]),null},exports.MainButton=function(e){var t=e.text,u=void 0===t?"CONTINUE":t,o=e.progress,r=void 0!==o&&o,l=e.disable,i=void 0!==l&&l,c=e.color,s=e.textColor,p=e.onClick,v=n.useContext(a),h=n.useId(),m=d(),C=null==m?void 0:m.MainButton,x=null==m?void 0:m.themeParams;return n.useEffect(function(){null==C||C.setParams({color:c||(null==x?void 0:x.button_color)||"#fff"})},[c,x,C]),n.useEffect(function(){null==C||C.setParams({text_color:s||(null==x?void 0:x.button_text_color)||"#000"})},[C,x,s]),n.useEffect(function(){null==C||C.setText(u)},[u,C]),n.useEffect(function(){i?null==C||C.disable():i||null==C||C.enable()},[i,C]),n.useEffect(function(){r?null==C||C.showProgress(!1):r||null==C||C.hideProgress()},[r,C]),n.useEffect(function(){if(p)return null==C||C.onClick(p),function(){null==C||C.offClick(p)}},[p,C]),f({show:null==C?void 0:C.show,hide:null==C?void 0:C.hide,currentShowedIdRef:v.MainButton,id:h}),null},exports.WebAppProvider=function(e){var t=e.children,s=e.options,f=n.useMemo(function(){return p({},l,s)},[s]),d=n.useMemo(c,[]);return u.default.createElement(a.Provider,{value:d},u.default.createElement(r.Provider,{value:o},u.default.createElement(i.Provider,{value:f},t)))},exports.useExpand=function(){var e=d(),t=n.useState(null==e?void 0:e.isExpanded),u=t[0],o=t[1];return n.useEffect(function(){if(e){var n=function(n){n.isStateStable&&o(e.isExpanded)};return e.onEvent("viewportChanged",n),function(){return e.offEvent("viewportChanged",n)}}},[e]),[u,n.useCallback(function(){return null==e||null==e.expand?void 0:e.expand()},[e])]},exports.useHapticFeedback=function(){var e=d(),t=null==e?void 0:e.HapticFeedback,u=n.useCallback(function(){return null==t?void 0:t.impactOccurred.apply(t,[].slice.call(arguments))},[t]),o=n.useCallback(function(){return null==t?void 0:t.notificationOccurred.apply(t,[].slice.call(arguments))},[t]),r=n.useCallback(function(){return null==t?void 0:t.selectionChanged.apply(t,[].slice.call(arguments))},[t]);return[u,o,r]},exports.useReadTextFromClipboard=function(){var e=d();return n.useCallback(function(){return new Promise(function(n){null==e||null==e.readTextFromClipboard||e.readTextFromClipboard(n)})},[e])},exports.useScanQrPopup=function(){var e=d(),t=n.useCallback(function(){return null==e||null==e.showScanQrPopup?void 0:e.showScanQrPopup.apply(e,[].slice.call(arguments))},[e]);return[t,n.useCallback(function(){return null==e||null==e.closeScanQrPopup?void 0:e.closeScanQrPopup()},[e])]},exports.useShowPopup=function(){var e=d();return n.useCallback(function(n){return new Promise(function(t,u){try{null==e||null==e.showPopup||e.showPopup(n,function(n){t(n)})}catch(n){u(n)}})},[e])},exports.useSwitchInlineQuery=function(){var e=d();return n.useCallback(function(){return null==e||null==e.switchInlineQuery?void 0:e.switchInlineQuery.apply(e,[].slice.call(arguments))},[e])},exports.useThemeParams=function(){var e=d(),t=n.useState(null==e?void 0:e.colorScheme),u=t[0],o=t[1],r=n.useState((null==e?void 0:e.themeParams)||{}),l=r[0],i=r[1];return n.useEffect(function(){if(e){var n=function(){o(e.colorScheme),i(e.themeParams)};return e.onEvent("themeChanged",n),function(){e.offEvent("themeChanged",n)}}},[e]),[u,l]};
