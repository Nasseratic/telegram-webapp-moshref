import n,{createContext as e,useContext as o,useEffect as t,useId as l,useCallback as r,useState as u,useMemo as i}from"react";var c;const s="undefined"!=typeof window&&null!=(c=window)&&null!=(c=c.Telegram)&&c.WebApp?window.Telegram.WebApp:null,a=e(s),d={smoothButtonsTransition:!1,smoothButtonsTransitionMs:50},h=e(d),p=()=>({MainButton:{current:null},BackButton:{current:null}}),v=e({MainButton:{current:null},BackButton:{current:null}}),m=()=>{},f=({id:n,show:e=m,hide:l=m,currentShowedIdRef:r})=>{const{smoothButtonsTransition:u,smoothButtonsTransitionMs:i}=o(h);t(()=>(e(),r.current=n,()=>{u?(r.current=null,setTimeout(()=>{r.current||l()},i)):(l(),r.current=null)}),[l,n,r,e,u,i])},w=()=>o(a),P=({text:n="CONTINUE",progress:e=!1,disable:r=!1,color:u,textColor:i,onClick:c})=>{const s=o(v),a=l(),d=w(),h=null==d?void 0:d.MainButton,p=null==d?void 0:d.themeParams;return t(()=>{null==h||h.setParams({color:u||(null==p?void 0:p.button_color)||"#fff"})},[u,p,h]),t(()=>{null==h||h.setParams({text_color:i||(null==p?void 0:p.button_text_color)||"#000"})},[h,p,i]),t(()=>{null==h||h.setText(n)},[n,h]),t(()=>{r?null==h||h.disable():r||null==h||h.enable()},[r,h]),t(()=>{e?null==h||h.showProgress(!1):e||null==h||h.hideProgress()},[e,h]),t(()=>{if(c)return null==h||h.onClick(c),()=>{null==h||h.offClick(c)}},[c,h]),f({show:null==h?void 0:h.show,hide:null==h?void 0:h.hide,currentShowedIdRef:s.MainButton,id:a}),null},B=({onClick:n})=>{const e=o(v),r=l(),u=w(),i=null==u?void 0:u.BackButton;return f({show:null==i?void 0:i.show,hide:null==i?void 0:i.hide,currentShowedIdRef:e.BackButton,id:r}),t(()=>{if(n&&i)return i.onClick(n),()=>{i.offClick(n)}},[n,i]),null},b=()=>{const n=w();return r(e=>new Promise((o,t)=>{try{null==n||null==n.showPopup||n.showPopup(e,n=>{o(n)})}catch(n){t(n)}}),[n])},C=()=>{const n=w(),e=null==n?void 0:n.HapticFeedback;return[r((...n)=>null==e?void 0:e.impactOccurred(...n),[e]),r((...n)=>null==e?void 0:e.notificationOccurred(...n),[e]),r((...n)=>null==e?void 0:e.selectionChanged(...n),[e])]},g=()=>{const n=w(),[e,o]=u(null==n?void 0:n.colorScheme),[l,r]=u((null==n?void 0:n.themeParams)||{});return t(()=>{if(!n)return;const e=()=>{o(n.colorScheme),r(n.themeParams)};return n.onEvent("themeChanged",e),()=>{n.offEvent("themeChanged",e)}},[n]),[e,l]},x=()=>{const n=w();return[r((...e)=>null==n||null==n.showScanQrPopup?void 0:n.showScanQrPopup(...e),[n]),r(()=>null==n||null==n.closeScanQrPopup?void 0:n.closeScanQrPopup(),[n])]},k=()=>{const n=w();return r(()=>new Promise(e=>{null==n||null==n.readTextFromClipboard||n.readTextFromClipboard(e)}),[n])},S=()=>{const n=w();return r((...e)=>null==n||null==n.switchInlineQuery?void 0:n.switchInlineQuery(...e),[n])},T=()=>{const n=w(),[e,o]=u(null==n?void 0:n.isExpanded);return t(()=>{if(!n)return;const e=e=>{e.isStateStable&&o(n.isExpanded)};return n.onEvent("viewportChanged",e),()=>n.offEvent("viewportChanged",e)},[n]),[e,r(()=>null==n||null==n.expand?void 0:n.expand(),[n])]};function E(){return E=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(n[t]=o[t])}return n},E.apply(this,arguments)}const y=({children:e,options:o})=>{const t=i(()=>E({},d,o),[o]),l=i(p,[]);return n.createElement(v.Provider,{value:l},n.createElement(a.Provider,{value:s},n.createElement(h.Provider,{value:t},e)))};export{B as BackButton,P as MainButton,y as WebAppProvider,T as useExpand,C as useHapticFeedback,k as useReadTextFromClipboard,x as useScanQrPopup,b as useShowPopup,S as useSwitchInlineQuery,g as useThemeParams};
